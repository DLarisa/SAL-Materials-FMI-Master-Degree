----- Teorie
-- Procedură Onestă (Vulnerbailă)
EXEC ELEARN_APP_ADMIN.PROC_DYNAM('SELECT * FROM ELEARN_APP_ADMIN.SOLVES');
-- Atac (Șterge conținutul tabelului SOLVES, deși nu are privilegii asupra tabelului)
EXEC ELEARN_APP_ADMIN.PROC_DYNAM('DECLARE v_id NUMBER(4); BEGIN DELETE FROM ELEARN_APP_ADMIN.SOLVES; 
    COMMIT; SELECT student_id INTO v_id FROM ELEARN_APP_ADMIN.SOLVES 
    WHERE STUDENT_ID = 1 AND HOMEWORK_ID = 2; END; ');


--- Procedură FIXED
-- Merge dacă are și privilegii de SELECT
EXEC ELEARN_APP_ADMIN.PROC_DYNAM('SELECT * FROM ELEARN_APP_ADMIN.SOLVES');
-- Nu mai merge
EXEC ELEARN_APP_ADMIN.PROC_DYNAM('DECLARE v_id NUMBER(4); BEGIN DELETE FROM ELEARN_APP_ADMIN.SOLVES; 
    COMMIT; SELECT student_id  INTO v_id FROM ELEARN_APP_ADMIN.SOLVES 
    WHERE STUDENT_ID = 1 AND HOMEWORK_ID = 2; END; ');
    
    
-- Procedura Regex
EXEC ELEARN_APP_ADMIN.PROC_DYNAM('SELECT * FROM ELEARN_APP_ADMIN.SOLVES');
EXEC ELEARN_APP_ADMIN.PROC_DYNAM('DECLARE v_id NUMBER(4); BEGIN DELETE FROM ELEARN_APP_ADMIN.SOLVES; 
    COMMIT; SELECT student_id  INTO v_id FROM ELEARN_APP_ADMIN.SOLVES 
    WHERE STUDENT_ID = 1 AND HOMEWORK_ID = 2; END; ');